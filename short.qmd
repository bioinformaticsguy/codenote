---
title: "Short Read"
---
# Short Read Pipeline Documentation
This page serves as a comprehensive guide to the Short Read Pipeline. It tracks the versions of the pipeline used throughout the analysis, along with the exact terminal commands executed to run each step of the pipeline. By documenting both the pipeline versions and the commands, this page ensures reproducibility and transparency in the analysis workflow. Each section includes:

- Pipeline Version: The version of the pipeline that was utilized for the analysis.

- Terminal Commands: A detailed log of all commands executed in the terminal to run the pipeline.

- Execution Details: Descriptions of key steps involved, including any specific parameters or configurations used.

# Setting up the Environment
Below are the one time commands that are needed to setup the env.
```bash
conda create -n nf
conda activate nf
conda install bioconda::nextflow
conda install conda-forge::singularity
cd work/
mkdir raredisease/
cd raredisease/
mkdir workdir outdir
```

# Verify the instalations

Check Nextflow verison 
```bash
(nf)$ nextflow -version

      N E X T F L O W
      version 24.10.6 build 5937
      created 23-04-2025 16:53 UTC (18:53 CEST)
      cite doi:10.1038/nbt.3820
      http://nextflow.io
```

Check Singularity verison 
```bash
(nf)$ singularity -version
singularity version 3.8.6
```

# Run Command
```bash
nextflow run nf-core/raredisease -revision dev -profile bih,test --outdir /data/cephfs-1/home/users/alhassa_m/work/raredisease/outdir/2025-02-05_16-59-21/ -work-dir /data/cephfs-1/home/users/alhassa_m/work/raredisease/workdir/
```

Command with custom config file:

```bash
 nextflow run nf-core/raredisease -revision dev -profile test -c custom.config --outdir /data/cephfs-1/home/users/alhassa_m/scratch/001/ -work-dir /data/cephfs-1/home/users/alhassa_m/scratch/workdir/
```

# Why we need dev or master


```bash
(nf) [alhassa_m@hpc-cpu-204 raredisease]$ nextflow run nf-core/raredisease -profile bih,test --outdir /data/cephfs-1/home/users/alhassa_m/work/raredisease/o
utdir/2025-02-05_16-59-21/ -work-dir /data/cephfs-1/home/users/alhassa_m/work/raredisease/workdir/

 N E X T F L O W   ~  version 24.10.6

Project `nf-core/raredisease` is currently stuck on revision: dev -- you need to explicitly specify a revision with the option `-r` in order to use it
```



# May 19th 2025 Monday
Tried to run the pipline again with the same configurations, it ran for the first time with errors and then I started to recieve errors like below:

```code
(nf) [alhassa_m@hpc-cpu-75 scratch]$  nextflow run nf-core/raredisease -revision dev -profile test -c custom.config --outdir /data/cephfs-1/home/users/alhassa_m/scratch/outdir/001/ -work-dir /data/cephfs-1/home/users/alhassa_m/scratch/workdir/
Nextflow 25.04.2 is available - Please consider updating your version to it

 N E X T F L O W   ~  version 24.10.6

Pulling nf-core/raredisease ...
Disk quota exceeded
(nf) [alhassa_m@hpc-cpu-75 scratch]$
```


Also noted that whenever I run the nextflow pipline it creates the .nextflow.log folder in the scratch folder and in the parent directory as well. 
Currently the problem is that the home directory gets filled up and then there is no space to download the images. 
Once I deleted the .singularity folder in the home directory.
Running the pipeline agian works but it then stops soon because of space error. 

Updated the custom Config File and apparently the file is being used as we can see changes on the terminal:

```code
Institutional config options
  config_profile_name            : Test profile
  config_profile_description     : Custom Config
  config_profile_contact         : Ali Hassan (Institut fuer Humangenetik)
  config_profile_url             : N/A
```

## Current Config File

```python
params {
    config_profile_description = 'Custom Config'
    config_profile_contact     = 'Ali Hassan (Institut fuer Humangenetik)'
    config_profile_url         = 'N/A'
}

params {
    max_memory = 760.GB
    max_cpus   = 48
    max_time   = 72.h
}

process {
    resourceLimits = [
        memory: 760.GB,
        cpus: 48,
        time: 72.h
    ]
    executor = 'slurm'
    scratch  = '$SCRATCHO'
}

singularity {
    enabled = true
}

```


## Next Steps
1. Try to change the project folder in the nextflow run command or in config (projectDir).

```bash
Core Nextflow options
  revision                       : dev
  runName                        : pedantic_bernard
  containerEngine                : singularity
  launchDir                      : /data/cephfs-1/scratch/groups/kircher/users/alhassa_m
  workDir                        : /data/cephfs-1/home/users/alhassa_m/scratch/workdir
  projectDir                     : /data/cephfs-1/home/users/alhassa_m/.nextflow/assets/nf-core/raredisease
  userName                       : alhassa_m
  profile                        : test
  configFiles                    : /data/cephfs-1/home/users/alhassa_m/.nextflow/assets/nf-core/raredisease/nextflow.config, /data/cephfs-1/scratch/groups/kircher/users/alhassa_m/custom.config
```

# May 20th 2025 Tuesday
We haven't changed the project folder rather we have created simlinks for .singularity folder.

```code
ln -s work/.singularity/ .singularity
```


This lets the folder in the home directory but all the real data that takes the space is now in the work directory which has a lot of quotoa.

Finally the pipline finished Running
```python 
-[nf-core/raredisease] Pipeline completed successfully-
Completed at: 20-May-2025 15:48:30
Duration    : 56m 2s
CPU hours   : 11.2
Succeeded   : 1'004
```
